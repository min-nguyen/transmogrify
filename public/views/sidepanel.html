<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

  <script src="./javascripts/jquery-3.2.1.min.js"></script>
  <script src="./javascripts/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="./stylesheets/jquery-ui.min.css">
  <link rel="stylesheet" href="./stylesheets/sidepanel.css">
</head>
<body>

<a class = "background"></a>


<div id="index" class="index-container">
  <div class="index-wrapper">
    <span class = "index-button-container" data-index-open="false">
      <div class='index-title' id="index_button" style="font-size:30px; cursor:pointer" onclick="toggleNav()">
          <span></span>
          <span></span>
          <span></span>
      </div>
      <div id='sidebar-horizontal'>
          <ul id='nav-horizontal'>
            <li class = "index_item_H"  href="#">
              <a>explore</a>
            </li>
            <li class = "index_item_H" href="#">
              <a>experiment</a>
            </li>
            <li class = "index_item_H" href="#">
              <a>friends</a>
            </li >
            <li class = "index_item_H" href="#">
              <a>my page</a>
            </li>
            <li class = "index_item_H" href="#">
              <a>profile</a>
            </li>
            <li class = "index_item_H" href="#">
              <a>logout</a>
            </li>
        </ul>
      </div>
    </span>
    <div id="index_content">
        <div class='wrapper'>
            <div class='sidebar'>
              <ul class='nav'>
                <li class = "index_item" href="#">
                  <a>popular</a>
                </li>
                <li class = "index_item" href="#">
                  <a>random</a>
                </li>
                <li class = "index_item" href="#">
                  <a>new</a>
                </li>
                <li class = "index_item" href="#">
                  <a>search</a>
                </li>
            </ul>
          </div>
        </div>
    </div>
    
  </div>
</div>

<div id="main_content">
    
</div>

<script>

///////////Insert Main Page/////////////

////////////////////////////////////////
  $(document).ready(function(){
    $("#main_content").load("../views/explore.html");
    toggleNav();

    // $(".index_item, .index_item_H").click(function(event){
    //     event.preventDefault();
    //     linkLocation = this.href;
    //     $("body").fadeOut(2000, redirectPage(linkLocation));      
    // });
         
    // function redirectPage(linkLocation) {
    //     window.location = linkLocation;
    // }
  });

  function toggleNav(){
      $("#index_button").toggleClass('open');
      if($(".index-button-container").attr("data-index-open") === "false"){
          $(".index-title").children("span").stop().animate({backgroundColor:'#854442'}, 300);
          openNav();
          $(".index-button-container").attr("data-index-open","true");
          $(".index-title").toggleClass("container-closed");
      }
      else {
          $(".index-title").children("span").stop().animate({backgroundColor:'#bd4242'}, 100);
          closeNav();
          $(".index-button-container").attr("data-index-open","false");
          $(".index-title").toggleClass("container-closed");
      }
    }
    
    function openNav() {
        var window_height = $(window).height();

        $("#main_content").fadeTo("slow", 0.5);
        slideIndexItemsRight();
        $("#index_content").animate({height:window_height}, "medium", function(){
          $("#index_content").animate({width:"1500px"}, "medium", function(){
       
          });
        });
    }

    function closeNav() {
        var window_height = $(window).height(); 
        slideIndexItemsLeft();
        $("#main_content").fadeTo("slow", 0.9);
        $("#index_content").animate({height:"200px"}, "medium", function(){
          $("#index_content").animate({width:"200px"}, "medium", function(){
           
          });
        });
      
      }

    function slideIndexItemsRight(){
      var len = $(".nav").children().length; 

      $(".index_item").each( function(index){
        $(this).show("slide", "swing", index * 300);
      });
      $(".index_item_H").each( function(indexa){
        $(this).hide("slide", "swing", indexa * 200);
      });
    }

    function slideIndexItemsLeft(){

      $(".index_item").each( function(index){
        $(this).hide("slide", "swing", index * 200);
      });
      $(".index_item_H").each( function(indexa){
        $(this).show("slide", "swing", indexa * 200);
      });
    }


</script>
     
</body>
</html> 
